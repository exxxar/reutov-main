<template>
    <div class="test-block">
        <div style="white-space:nowrap" class="test-number number mr-2">
            {{ ordinalNumber }} <b>/   {{ questions }}</b>
        </div>
        <div class="test-main test-drag test-drag-36">
            <div class="test-caption">
                <p>
                    Топическая диагностика нарушений общей чувствительности
                </p>
                <div class="test-number number" style="width: 100%;">
                    <b>Карточка книги <span style="font-weight: 700; display: inline;">№{{ number }}</span></b>
                </div>
            </div>
            <p v-if="!completed" class="explanation-txt pb-2">
                <b>Вписать в схему:</b><br />
            </p>

            <div id="stage-parent36" class="test-compliance">
                <div
                    v-if="!completed"
                    id="question_36"
                    class="compliance-img36"
                ></div>
                <div v-if="completed" id="question_36" class="compliance-img36">
                    <div style="display: flex; justify-content: center;">
                        <img
                            :src="currentUrl + '/test-img/answer36.png'"
                            alt="courses"
                            v-bind:class="{
                                correct: correct == 1,
                                incorrect: correct == 0
                            }"
                        />
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<script>
var stage36 = null;
export default {
    props: {
        number: {
            type: String,
            default: "01"
        },
        from: {
            type: String,
            default: "01"
        },
        completed: {
            type: Boolean
        },
        serverAnswers: {
            type: Array
        },
      questions: {
            type: Number,
        },
        ordinalNumber: {
            type: String,
            default: "01"
        },
    },
    created() {
        window.addEventListener("resize", this.fitStageIntoParentContainer);
        this.currentUrl = window.location.origin;
    },
    data() {
        return {
            body36: [
                {
                    id: 15,
                    data:
                        "M 93.41,365.78 C 89.88,365.71 89.95,362.08 89.95,362.08 90.50,358.33 93.61,358.39 93.61,358.39 93.61,358.39 96.86,357.91 97.36,362.00 97.47,364.70 96.33,365.13 96.33,365.13 96.33,365.13 96.48,366.68 96.48,366.68 96.48,366.68 99.44,369.75 99.44,369.75 99.44,369.75 104.53,367.78 104.53,367.78 104.53,367.78 106.22,362.78 106.22,362.78 106.22,362.78 112.24,362.61 112.28,362.66 112.32,362.69 114.12,366.31 114.12,366.31 114.12,366.31 120.88,366.34 120.88,366.34 120.88,366.34 122.69,361.62 122.69,361.62 122.69,361.62 129.28,361.56 129.28,361.56 129.28,361.56 131.28,366.39 131.28,366.47 131.28,366.55 136.69,366.84 136.69,366.84 136.69,366.84 139.56,362.59 139.56,362.59 139.56,362.59 145.75,362.72 145.75,362.72 145.75,362.72 146.49,368.09 146.53,368.09 146.58,368.09 153.09,369.09 153.09,369.09 153.09,369.09 154.72,363.78 154.72,363.78 154.72,363.78 158.38,361.38 158.38,361.38 158.38,361.38 164.03,363.28 164.03,363.28 164.03,363.28 167.47,357.34 167.47,357.34 167.47,357.34 162.97,353.25 162.97,353.25 162.97,353.25 164.31,347.97 164.31,347.97 164.31,347.97 170.06,346.59 170.06,346.59 170.06,346.59 170.31,340.09 170.31,340.09 170.31,340.09 164.41,337.72 164.41,337.72 164.41,337.72 164.31,332.12 164.31,332.12 164.31,332.12 169.24,330.05 169.28,330.12 169.33,330.21 169.19,327.66 169.19,327.66 169.19,327.66 174.12,321.47 174.12,321.47 174.12,321.47 169.81,318.50 169.81,318.50 169.81,318.50 166.38,323.41 166.38,323.41 166.38,323.41 161.31,318.50 161.31,318.50 161.31,318.50 157.66,321.62 157.66,321.62 157.66,321.62 164.31,327.53 164.31,327.53 164.31,327.53 164.31,330.06 164.31,330.06 164.31,330.06 169.59,332.19 169.59,332.19 169.59,332.19 169.47,337.41 169.47,337.47 169.47,337.53 164.38,340.16 164.38,340.16 164.38,340.16 164.47,346.41 164.47,346.41 164.47,346.41 169.44,348.94 169.44,348.94 169.44,348.94 167.62,354.75 167.62,354.75 167.62,354.75 162.03,355.25 162.03,355.25 162.03,355.25 159.47,360.41 159.47,360.41 159.47,360.41 162.91,365.72 162.91,365.72 162.91,365.72 157.12,369.50 157.12,369.50 157.12,369.50 153.62,364.38 153.62,364.38 153.62,364.38 147.66,363.03 147.66,363.03 147.66,363.03 144.91,367.62 144.91,367.62 144.91,367.62 139.22,367.53 139.22,367.53 139.22,367.53 136.72,361.53 136.69,361.53 136.64,361.53 131.22,361.72 131.22,361.72 131.22,361.72 128.50,366.38 128.50,366.38 128.50,366.38 122.72,366.21 122.72,366.25 122.72,366.30 120.78,361.84 120.78,361.84 120.78,361.84 113.88,361.84 113.88,361.84 113.88,361.84 112.81,366.96 112.81,367.00 112.81,367.05 106.41,367.06 106.41,367.06 106.41,367.06 103.19,363.75 103.19,363.75 103.19,363.75 98.06,365.69 98.06,365.69 98.06,365.69 98.12,370.12 98.12,370.12 98.12,370.12 92.28,372.59 92.28,372.59 92.28,372.59 88.10,369.50 88.12,369.50 88.15,369.50 82.56,371.81 82.56,371.81 82.56,371.81 82.19,377.44 82.19,377.44 82.19,377.44 75.44,378.25 75.44,378.25 75.44,378.25 72.69,374.44 72.69,374.44 72.69,374.44 66.50,374.88 66.50,374.88 66.50,374.88 65.12,380.06 65.12,380.06 65.12,380.06 58.94,380.19 58.94,380.19 58.94,380.19 56.50,375.44 56.50,375.44 56.50,375.44 50.31,375.56 50.31,375.56 50.31,375.56 48.56,380.31 48.56,380.31 48.56,380.31 42.17,380.56 42.25,380.56 42.33,380.56 40.06,375.88 40.06,375.88 40.06,375.88 33.81,376.25 33.81,376.25 33.81,376.25 32.50,381.94 32.50,381.94 32.50,381.94 26.50,382.38 26.50,382.38 26.50,382.38 23.81,378.06 23.81,378.06 23.81,378.06 16.94,378.69 16.94,378.69 16.94,378.69 16.50,383.94 16.50,383.94 16.50,383.94 12.00,384.75 12.00,384.75 12.00,384.75 11.19,379.94 11.19,379.94 11.19,379.94 15.25,379.06 15.25,379.06 15.25,379.06 18.34,383.31 18.44,383.31 18.52,383.31 24.50,382.88 24.50,382.88 24.50,382.88 26.00,377.48 26.00,377.31 26.00,377.14 31.88,376.56 31.88,376.56 31.88,376.56 34.44,381.69 34.44,381.69 34.44,381.69 40.56,381.31 40.56,381.31 40.56,381.31 41.75,375.50 41.75,375.50 41.75,375.50 48.38,375.44 48.38,375.44 48.38,375.44 50.35,380.50 50.44,380.50 50.52,380.50 57.00,380.31 57.00,380.31 57.00,380.31 58.56,374.69 58.56,374.69 58.56,374.69 64.88,374.81 64.88,374.81 64.88,374.81 67.19,379.56 67.19,379.56 67.19,379.56 73.62,378.69 73.62,378.69 73.62,378.69 74.75,372.75 74.75,372.75 74.75,372.75 80.88,372.31 80.88,372.31 80.88,372.31 84.38,376.01 84.38,376.19 84.38,376.36 90.25,374.06 90.25,374.06 90.25,374.06 89.56,368.62 89.56,368.62 89.56,368.62 93.91,366.78 93.91,366.78 93.91,366.78 93.75,366.12 93.75,366.12 93.75,366.12 93.41,365.78 93.41,365.78 Z",
                    needed_image: "Image arrow right"
                },
                {
                    id: 1,
                    data:
                        "M 94.18,333.38 C 94.18,333.38 98.77,333.21 98.77,333.21 98.77,333.21 96.56,345.31 96.56,345.31 96.56,345.31 91.96,345.31 91.96,345.31 91.96,345.31 94.18,333.38 94.18,333.38 Z",
                    needed_image: "Image dotted line"
                },
                {
                    id: 2,
                    data:
                        "M 147.57,304.82 C 147.57,304.82 145.35,315.90 145.35,315.90 145.35,315.90 148.51,315.90 148.51,315.90 148.51,315.90 150.22,304.84 150.22,304.84 150.22,304.84 151.80,304.87 151.80,304.87 151.80,304.87 149.35,315.99 149.35,315.99 149.35,315.99 152.51,315.99 152.51,315.99 152.51,315.99 154.96,304.84 154.96,304.84 154.96,304.84 151.83,304.87 151.83,304.87 151.83,304.87 147.57,304.82 147.57,304.82 Z",
                    needed_image: "Image chevrone right"
                },
                {
                    id: 15,
                    data:
                        "M 206.19,136.12 C 206.19,136.12 208.25,135.75 208.25,135.75 208.25,135.75 208.75,141.81 208.75,141.81 208.75,141.81 215.94,141.44 215.94,141.44 215.94,141.44 217.94,136.31 217.94,136.31 217.94,136.31 224.25,136.25 224.25,136.25 224.25,136.25 226.25,142.56 226.25,142.56 226.25,142.56 233.12,142.06 233.12,142.06 233.24,142.36 235.05,138.66 233.69,135.06 233.69,135.06 239.06,132.94 239.06,132.94 239.06,132.94 244.38,138.06 244.38,138.06 244.38,138.06 249.81,134.06 249.81,134.06 249.81,134.06 247.44,126.94 247.44,126.94 247.44,126.94 251.62,122.56 251.62,122.56 251.62,122.56 258.44,125.56 258.44,125.56 258.44,125.56 262.00,120.91 262.00,121.00 262.00,121.08 257.12,115.06 257.12,115.06 257.12,115.06 260.50,109.62 260.50,109.62 260.50,109.62 267.50,110.94 267.50,110.94 267.50,110.94 270.31,105.38 270.31,105.38 270.31,105.38 264.69,100.88 264.69,100.88 264.69,100.88 267.19,95.44 267.19,95.44 267.19,95.44 275.38,95.94 275.38,95.94 275.38,95.94 278.06,89.75 278.06,89.75 278.06,89.75 271.56,86.06 271.56,86.06 271.56,86.06 273.50,79.81 273.50,79.81 273.50,79.81 280.08,79.22 280.00,79.22 279.92,79.22 282.09,72.91 282.09,72.91 282.09,72.91 277.16,69.44 277.16,69.44 277.16,69.44 278.94,63.81 278.94,63.81 278.94,63.81 284.28,63.50 284.28,63.50 284.28,63.50 286.66,56.72 286.66,56.72 286.66,56.72 282.37,54.09 282.28,54.09 282.20,54.09 283.41,49.38 283.50,49.38 283.58,49.38 288.50,51.25 288.50,51.25 288.50,51.25 286.84,55.31 286.84,55.31 286.84,55.31 281.22,55.12 281.22,55.12 281.22,55.12 279.50,62.09 279.50,62.09 279.50,62.09 284.66,64.59 284.66,64.59 284.66,64.59 282.53,71.16 282.53,71.16 282.53,71.16 276.56,71.03 276.56,71.03 276.56,71.03 274.00,77.88 274.00,77.88 274.00,77.88 280.00,80.94 280.00,80.94 280.00,80.94 278.65,87.94 278.56,87.94 278.48,87.94 270.56,87.56 270.56,87.56 270.56,87.56 268.62,93.69 268.62,93.69 268.62,93.69 274.56,98.56 274.56,98.56 274.56,98.56 271.19,104.00 271.19,104.00 271.19,104.00 263.81,102.81 263.81,102.81 263.81,102.81 261.69,107.88 261.69,107.88 261.69,107.88 266.81,113.56 266.81,113.56 266.81,113.56 263.25,119.12 263.25,119.12 263.25,119.12 255.81,117.12 255.81,117.12 255.81,117.12 253.00,120.62 253.00,120.62 253.00,120.62 257.19,128.00 257.19,128.00 257.19,128.00 251.69,132.19 251.69,132.19 251.69,132.19 245.31,128.00 245.31,128.00 245.31,128.00 240.62,132.25 240.62,132.25 240.62,132.25 242.00,139.00 242.00,139.00 242.00,139.00 235.79,141.38 235.88,141.38 235.96,141.38 232.62,136.02 232.62,135.94 232.62,135.85 226.19,136.50 226.19,136.50 226.19,136.50 224.75,143.00 224.75,143.00 224.75,143.00 217.58,142.81 217.50,142.81 217.42,142.81 216.44,135.81 216.44,135.81 216.44,135.81 209.62,135.88 209.62,135.88 209.62,135.88 207.62,140.77 207.62,140.69 207.62,140.60 204.38,139.06 204.38,139.06 202.88,140.44 202.25,140.56 199.93,140.67 199.93,140.76 195.25,140.94 194.91,135.31 195.34,130.11 199.60,130.79 199.34,130.71 204.53,130.45 204.91,134.73 204.93,136.08 206.00,136.00 206.19,136.12 206.19,136.12 Z",
                    needed_image: "Image dot"
                },

                {
                    id: 15,
                    data:
                        "M 198.94,143.50 C 198.94,143.50 196.69,140.31 196.69,140.31 196.69,140.31 191.85,143.41 191.85,143.41 191.85,143.41 192.12,134.88 192.12,134.88 192.12,134.88 187.50,135.12 187.50,135.12 187.50,135.12 188.06,146.81 188.06,146.81 188.06,146.81 187.75,148.75 187.75,148.75 187.75,148.75 193.06,151.06 193.06,151.06 193.06,151.06 193.12,157.25 193.12,157.25 193.12,157.25 188.12,159.81 188.12,159.81 188.12,159.81 188.75,166.06 188.75,166.06 188.75,166.06 194.44,167.75 194.44,167.75 194.44,167.75 195.18,173.81 195.12,173.81 195.07,173.81 190.06,176.12 190.06,176.12 190.06,176.12 190.44,182.81 190.44,182.81 190.44,182.81 197.06,183.81 197.06,183.81 197.06,183.81 197.50,190.38 197.50,190.38 197.50,190.38 191.81,193.25 191.81,193.25 191.81,193.25 192.31,199.25 192.31,199.25 192.31,199.25 199.12,200.88 199.12,200.88 199.12,200.88 199.88,207.25 199.88,207.25 199.88,207.25 193.50,209.62 193.50,209.62 193.50,209.62 194.06,215.88 194.06,215.88 194.06,215.88 201.06,217.19 201.06,217.19 201.06,217.19 201.00,224.31 201.00,224.31 201.00,224.31 195.38,226.38 195.38,226.44 195.38,226.50 195.88,232.81 195.88,232.81 195.88,232.81 201.56,234.50 201.56,234.50 201.56,234.50 202.38,240.43 202.38,240.38 202.38,240.32 197.38,243.00 197.38,243.00 197.38,243.00 197.76,249.62 197.81,249.62 197.88,249.62 204.69,251.19 204.69,251.19 204.69,251.19 204.75,257.69 204.75,257.69 204.75,257.69 198.56,259.81 198.56,259.81 198.56,259.81 198.75,266.25 198.75,266.25 198.75,266.25 205.38,268.50 205.38,268.50 205.38,268.50 205.31,274.56 205.31,274.50 205.31,274.44 199.00,276.19 199.00,276.19 199.00,276.19 198.94,283.12 198.94,283.12 198.94,283.12 205.31,285.25 205.31,285.25 205.31,285.25 205.56,291.69 205.56,291.69 205.56,291.69 198.69,293.44 198.69,293.44 198.69,293.44 198.81,299.31 198.81,299.31 198.81,299.31 204.56,302.25 204.56,302.25 204.56,302.25 203.12,308.88 203.12,308.88 203.12,308.88 196.88,308.44 196.81,308.44 196.76,308.44 193.18,311.56 193.12,311.56 193.07,311.56 195.25,318.00 195.25,318.00 195.25,318.00 189.00,320.50 189.00,320.50 189.00,320.50 185.50,315.44 185.50,315.44 185.50,315.44 178.94,315.56 178.94,315.56 179.75,317.19 176.86,320.72 176.75,320.50 176.75,320.50 170.12,317.06 170.12,317.06 170.12,317.06 171.07,314.96 171.07,314.96 171.07,314.96 169.38,313.91 169.38,313.91 169.16,315.66 168.05,318.45 164.83,318.40 161.57,318.48 159.56,316.28 159.48,313.54 159.39,310.81 161.27,308.90 164.37,308.93 166.04,309.10 169.31,309.22 169.38,313.91 170.36,314.52 171.06,314.95 171.06,314.95 171.06,314.95 171.88,313.25 171.88,313.25 171.88,313.25 177.44,315.62 177.44,315.62 177.44,315.62 179.25,321.06 179.25,321.00 179.25,320.94 186.38,320.69 186.38,320.69 186.38,320.69 187.00,315.19 187.00,315.19 187.00,315.19 191.38,312.96 191.38,312.88 191.38,312.79 196.88,316.27 196.88,316.19 196.88,316.10 202.31,311.56 202.31,311.56 202.31,311.56 197.69,307.25 197.69,307.25 197.69,307.25 198.62,301.12 198.62,301.12 198.62,301.12 205.21,300.27 205.12,300.19 205.03,300.10 205.56,293.81 205.56,293.81 205.56,293.81 199.06,291.69 199.06,291.69 199.06,291.69 198.88,285.00 198.88,285.00 198.88,285.00 205.62,282.88 205.62,282.88 205.62,282.88 205.69,276.50 205.69,276.50 205.69,276.50 198.88,274.44 198.88,274.44 198.88,274.44 198.88,268.79 198.88,268.62 198.88,268.45 205.12,266.56 205.12,266.56 205.12,266.56 205.25,259.71 205.25,259.62 205.25,259.54 198.44,257.88 198.44,257.88 198.44,257.88 198.00,251.19 198.00,251.19 198.00,251.19 203.38,249.25 203.38,249.25 203.38,249.25 203.19,242.44 203.19,242.44 203.19,242.44 196.94,241.12 196.94,241.12 196.94,241.12 196.38,234.56 196.38,234.56 196.38,234.56 201.62,232.56 201.62,232.56 201.62,232.56 201.31,226.06 201.31,226.06 201.31,226.06 195.21,224.69 195.12,224.69 195.04,224.69 194.69,217.75 194.69,217.75 194.69,217.75 199.88,215.44 199.88,215.44 199.88,215.44 199.50,209.27 199.50,209.19 199.50,209.10 193.38,207.88 193.38,207.88 193.38,207.88 192.94,201.31 192.94,201.31 192.94,201.31 198.69,198.56 198.69,198.56 198.69,198.56 198.19,192.38 198.19,192.38 198.19,192.38 191.50,190.88 191.50,190.88 191.50,190.88 191.12,184.75 191.12,184.75 191.12,184.75 196.06,182.00 196.06,182.00 196.06,182.00 195.50,175.56 195.50,175.56 195.50,175.56 189.19,174.19 189.19,174.19 189.19,174.19 188.94,168.38 188.94,168.38 188.94,168.38 193.81,165.69 193.81,165.69 193.81,165.69 193.38,158.81 193.38,158.81 193.38,158.81 186.81,157.88 186.81,157.88 186.81,157.88 187.00,150.00 187.00,150.00 187.00,150.00 192.12,149.44 192.12,149.44 192.12,149.44 192.19,147.62 192.19,147.62 192.19,147.62 198.94,143.88 198.94,143.88",
                    needed_image: "Image dotted line"
                }
            ],
            secondbrain: [
                {
                    id: 23,
                    data:
                        "M 187.64,431.00 C 190.23,432.05 230.94,436.19 239.18,411.09 241.63,403.14 221.17,168.83 221.17,168.83 221.17,168.83 225.35,163.48 225.35,163.48 225.35,163.48 221.39,160.87 221.39,160.87 221.39,160.87 217.43,165.43 217.43,165.43 217.43,165.43 211.48,161.83 211.48,161.83 211.48,161.83 209.43,164.22 209.43,164.22 209.43,164.22 215.19,169.52 215.13,169.52 215.07,169.52 233.50,402.44 234.00,407.55 230.90,432.14 174.44,431.56 178.19,411.50 178.47,411.50 177.22,405.94 172.44,406.06 167.35,406.07 166.72,411.50 166.75,411.50 166.75,411.50 165.44,417.38 173.12,417.31 175.88,428.94 187.64,431.00 187.64,431.00 Z"
                },
                {
                    id: 23,
                    data:
                        "M 103.36,382.87 C 103.35,382.87 103.68,378.61 107.82,378.58 110.77,378.56 113.11,380.36 113.18,383.00 113.42,385.24 111.96,386.84 111.96,386.84 111.96,386.84 114.27,391.98 114.27,391.98 138.88,379.44 164.96,400.48 164.96,400.48 164.96,400.48 172.13,400.09 172.13,400.09 172.13,400.09 172.26,405.00 172.26,405.00 172.26,405.00 166.43,406.26 166.43,406.26 166.43,406.26 166.00,414.00 166.00,414.00 166.00,414.00 160.83,414.04 160.83,414.04 160.83,414.04 160.91,405.39 160.91,405.39 160.91,405.39 141.27,386.00 112.62,398.12 95.81,411.67 14.09,414.64 14.09,414.64 14.09,414.64 14.00,409.36 14.00,409.36 54.27,406.17 90.18,404.23 109.33,393.44 109.33,393.44 107.36,388.18 107.36,388.18 107.36,388.18 103.36,387.76 103.36,382.87 Z"
                },
                {
                    id: 33,
                    data:
                        "M 264.62,158.00 C 264.62,158.00 262.31,169.94 262.31,169.94 262.31,169.94 265.06,169.94 265.06,169.94 265.06,169.94 267.33,158.00 267.33,158.00 267.33,158.00 271.00,158.00 271.00,158.00 271.00,158.00 268.94,169.88 268.94,169.88 268.94,169.88 266.44,169.88 266.44,169.88 266.44,169.88 268.64,158.00 268.64,158.00 268.64,158.00 272.11,157.97 272.11,158.03 272.11,158.09 270.06,170.00 270.06,170.00 270.06,170.00 273.00,169.94 273.00,169.94 273.00,169.94 275.11,158.02 275.11,158.02 275.11,158.02 264.62,158.00 264.62,158.00 Z"
                },
                {
                    id: 23,
                    data:
                        "M 215.29,162.88 C 209.84,162.55 209.87,157.61 209.87,157.61 209.87,157.61 209.88,152.44 215.17,152.39 218.59,152.56 219.76,155.16 220.09,155.35 220.09,155.35 284.57,164.77 316.88,86.38 316.88,86.38 324.00,88.50 324.00,88.50 291.42,170.87 219.98,160.48 219.98,160.48 218.41,162.87 216.50,163.12 215.29,162.88 Z"
                }
            ],
            complited36: false,
            icons: [
                {
                    icon: "test-img/icon13.png",
                    id: 13
                },
                {
                    icon: "test-img/icon15.png",
                    id: 15
                },
                {
                    icon: "test-img/icon16.png",
                    id: 16
                }
            ],
            draggetItem: null,
            question_36Width: 645,
            question_36Height: 1150
        };
    },
    watch: {
        complited36: {
            handler: function(newVal, oldVal) {
                this.$emit("answer", {
                    question_index: 36,
                    answer: [{ result: this.complited36 }]
                });
            },
            deep: true
        }
    },
    mounted() {
        if (!this.completed) this.onStart();
    },
    methods: {
        fitStageIntoParentContainer() {
            var container = document.querySelector("#stage-parent36");

            // now we need to fit stage into parent
            var containerWidth = container.offsetWidth;
            // to do this we need to scale the stage
            var scale = containerWidth / this.question_36Width;
            //var scale = 0.94;

            stage36.width(this.question_36Width * scale);
            stage36.height(this.question_36Height * scale);
            stage36.scale({
                x: scale,
                y: scale
            });
            stage36.draw();
        },

        onStart() {
            let self = this;
            stage36 = new Konva.Stage({
                container: "question_36",
                width: this.question_36Width,
                height: this.question_36Height
            });

            var templayer36 = new Konva.Layer();
            var layer36 = new Konva.Layer();
            var group36 = new Konva.Group();
            var counter36 = 0;
            stage36.add(layer36);
            stage36.add(templayer36);
            var path36Front;

            var test77three;
            Konva.Image.fromURL(
                `${this.currentUrl}/test-img/test6.png`,
                function(test77three) {
                    test77three.setAttrs({
                        x: 150,
                        y: 400,
                        scaleX: 1.1,
                        scaleY: 1.15,
                        name: "test77 the third brain"
                    });
                    templayer36.add(test77three);
                    templayer36.batchDraw();
                }
            );

            var signature;
            signature = new Konva.Text({
                x: 0,
                y: 0,
                draggable: false,
                fill: "#333333",
                text: "А) Трехнейронный путь поверхностной чувствительности."
            });
            group36.add(signature);
            signature.fontFamily("Fira Sans");
            signature.fontSize(17);
            signature.fontStyle("normal");

            signature = new Konva.Text({
                x: 0,
                y: 25,
                draggable: false,
                fill: "#777777",
                text:
                    "Удерживайте левую кнопку мыши для того что бы выбрать нужный инструмент"
            });
            group36.add(signature);
            signature.fontFamily("Fira Sans");
            signature.fontSize(15);
            signature.fontStyle("300");

            var borderOfRect36;
            var dot36 = new Image();
            for (var i = 0; i < this.icons.length; i++) {
                borderOfRect36 = new Konva.Rect({
                    cornerRadius: 5,
                    x: 0 + i * 130,
                    y: 50,
                    width: 118,
                    height: 54,
                    fill: "#f5f5f5",
                    stroke: "#e6e6e6",
                    strokeWidth: 1
                });
                group36.add(borderOfRect36);
            }

            Konva.Image.fromURL(
                `${this.currentUrl}/test-img/icon15.png`,
                function(dot36) {
                    dot36.setAttrs({
                        x: 42,
                        y: 75,
                        scaleX: 2,
                        scaleY: 5,
                        id: 15,
                        draggable: true
                    });
                    templayer36.add(dot36);
                    templayer36.batchDraw();
                }
            );

            Konva.Image.fromURL(`${this.currentUrl}/test-img/1.png`, function(
                dot36
            ) {
                dot36.setAttrs({
                    x: 185,
                    y: 70,
                    scaleX: 1.5,
                    scaleY: 1.5,
                    id: 1,
                    draggable: true
                });
                templayer36.add(dot36);
                templayer36.batchDraw();
            });

            Konva.Image.fromURL(`${this.currentUrl}/test-img/2.png`, function(
                dot36
            ) {
                dot36.setAttrs({
                    x: 312,
                    y: 70,
                    scaleX: 1.5,
                    scaleY: 1.5,
                    id: 2,
                    draggable: true
                });
                templayer36.add(dot36);
                templayer36.batchDraw();
            });

            borderOfRect36 = new Konva.Rect({
                cornerRadius: 5,
                x: 390,
                y: 50,
                width: 118,
                height: 54,
                fill: "#f5f5f5",
                stroke: "#e6e6e6",
                strokeWidth: 1
            });
            group36.add(borderOfRect36);
            var clear1;
            clear1 = new Konva.Text({
                x: 425,
                y: 72,
                draggable: false,
                fill: "black",
                text: "Очистить"
            });
            group36.add(clear1);

            signature = new Konva.Text({
                x: 0,
                y: 190,
                draggable: false,
                fill: "#333333",
                text: "Б) Трехнейронный путь глубокой чувствительности."
            });
            group36.add(signature);
            signature.fontFamily("Fira Sans");
            signature.fontSize(17);
            signature.fontStyle("normal");

            signature = new Konva.Text({
                x: 0,
                y: 215,
                draggable: false,
                fill: "#777777",
                text:
                    "Удерживайте левую кнопку мыши для того что бы выбрать нужный инструмент"
            });
            group36.add(signature);
            signature.fontFamily("Fira Sans");
            signature.fontSize(15);
            signature.fontStyle("300");

            for (var i = 0; i < 2; i++) {
                borderOfRect36 = new Konva.Rect({
                    cornerRadius: 5,
                    x: 0 + i * 130,
                    y: 240,
                    width: 118,
                    height: 54,
                    fill: "#f5f5f5",
                    stroke: "#e6e6e6",
                    strokeWidth: 1
                });
                group36.add(borderOfRect36);
            }

            Konva.Image.fromURL(
                `${this.currentUrl}/test-img/icon13.png`,
                function(dot36) {
                    dot36.setAttrs({
                        x: 43,
                        y: 265,
                        scaleX: 1.5,
                        scaleY: 1.5,
                        id: 23,
                        draggable: true
                    });
                    templayer36.add(dot36);
                    templayer36.batchDraw();
                }
            );

            Konva.Image.fromURL(`${this.currentUrl}/test-img/3.png`, function(
                dot36
            ) {
                dot36.setAttrs({
                    x: 180,
                    y: 258,
                    scaleX: 1.5,
                    scaleY: 1.5,
                    id: 33,
                    draggable: true
                });
                templayer36.add(dot36);
                templayer36.batchDraw();
            });

            borderOfRect36 = new Konva.Rect({
                cornerRadius: 5,
                x: 260,
                y: 240,
                width: 118,
                height: 54,
                fill: "#f5f5f5",
                stroke: "#e6e6e6",
                strokeWidth: 1
            });
            group36.add(borderOfRect36);
            var clear2;
            clear2 = new Konva.Text({
                x: 293,
                y: 263,
                draggable: false,
                fill: "black",
                text: "Очистить"
            });
            group36.add(clear2);

            for (var i = 0; i < this.body36.length; i++) {
                path36Front = new Konva.Path({
                    x: 135,
                    y: 384,
                    fill: "#f5f5f5",
                    data: this.body36[i].data,
                    name: this.body36[i].needed_image,
                    numPoints: 10,
                    innerRadius: 20,
                    outerRadius: 25,
                    scaleX: 1.09,
                    scaleY: 1.15,
                    id: this.body36[i].id
                });
                layer36.add(path36Front);
            }

            for (var i = 0; i < this.secondbrain.length; i++) {
                path36Front = new Konva.Path({
                    x: 135,
                    y: 384,
                    fill: "#f5f5f5",
                    data: this.secondbrain[i].data,
                    numPoints: 10,
                    innerRadius: 20,
                    outerRadius: 25,
                    scaleX: 1.03,
                    scaleY: 1.08,
                    id: this.secondbrain[i].id
                });
                layer36.add(path36Front);
            }

            templayer36.add(group36);
            templayer36.draw();
            var targetPositionX;
            var targetPositionY;
            stage36.on("dragstart", function(e) {
                e.target.moveTo(templayer36);
                targetPositionX = e.target.attrs.x;
                targetPositionY = e.target.attrs.y;
                self.draggetItem = e.target.attrs.id;
                //console.log(targetPositionX)
                //console.log('Moving ' + e.target.name());
                layer36.draw();
            });

            var previousShape;
            stage36.on("dragmove", function(evt) {
                var pos = stage36.getPointerPosition();
                var shape = layer36.getIntersection(pos);
                if (previousShape && shape) {
                    if (previousShape !== shape) {
                        // leave from old targer
                        previousShape.fire(
                            "dragleave",
                            {
                                type: "dragleave",
                                target: previousShape,
                                evt: evt.evt
                            },
                            true
                        );

                        // enter new targer
                        shape.fire(
                            "dragenter",
                            {
                                type: "dragenter",
                                target: shape,
                                evt: evt.evt
                            },
                            true
                        );
                        previousShape = shape;
                    } else {
                        previousShape.fire(
                            "dragover",
                            {
                                type: "dragover",
                                target: previousShape,
                                evt: evt.evt
                            },
                            true
                        );
                    }
                } else if (!previousShape && shape) {
                    previousShape = shape;
                    shape.fire(
                        "dragenter",
                        {
                            type: "dragenter",
                            target: shape,
                            evt: evt.evt
                        },
                        true
                    );
                } else if (previousShape && !shape) {
                    previousShape.fire(
                        "dragleave",
                        {
                            type: "dragleave",
                            target: previousShape,
                            evt: evt.evt
                        },
                        true
                    );
                    previousShape = undefined;
                }
            });
            stage36.on("dragend", function(e) {
                var pos = stage36.getPointerPosition();
                var shape = layer36.getIntersection(pos);
                if (shape) {
                    previousShape.fire(
                        "drop",
                        {
                            type: "drop",
                            target: previousShape,
                            evt: e.evt
                        },
                        true
                    );
                }
                if (previousShape != undefined) {
                    e.target.setAttrs({
                        x: targetPositionX,
                        y: targetPositionY
                    });
                }
                console.log(counter36);
                if (counter36 === 9) {
                    self.complited36 = true;
                    //console.log(self.complited36);
                }
                previousShape = undefined;
                layer36.draw();
                templayer36.draw();
            });

            stage36.on("dragenter", function(e) {
                e.target.fill("red");
                layer36.draw();
            });

            stage36.on("dragleave", function(e) {
                e.target.fill("#f5f5f5");
                layer36.draw();
            });

            stage36.on("dragover", function(e) {
                layer36.draw();
            });

            stage36.on("drop", function(e) {
                if (e.target.attrs.id === self.draggetItem) {
                    if (e.target.attrs.id < 20) {
                        e.target.fill("blue");
                        e.target.moveTo(templayer36);
                        counter36++;
                    } else {
                        e.target.fill("purple");
                        e.target.moveTo(templayer36);
                        counter36++;
                    }
                } else {
                    e.target.fill("#f5f5f5");
                }
                layer36.draw();
            });
            this.fitStageIntoParentContainer();
            clear1.on("click", this.onStart);
            clear1.on("tap", this.onStart);
            clear2.on("click", this.onStart);
            clear2.on("tap", this.onStart);
        }
    },
    computed: {
        currentQuestionAnswers() {
            if (!this.serverAnswers) {
                return null;
            }

            return this.serverAnswers.find(x => x.question_index == "36");
        },
        correct() {
            if (!this.serverAnswers) {
                return null;
            }

            try {
                if (this.currentQuestionAnswers.answer[0].result) {
                    return 1;
                } else {
                    return 0;
                }
            } catch (error) {
                return 0;
            }
        }
    }
};
</script>

<style>
.drag,
.drop {
    display: inline-block;
}

.drop.allowed {
    background-color: #dfd;
}
</style>
